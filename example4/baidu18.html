<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>切换城市问题</title>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=G7HyWLnU8jtfIeIgF1QFSfGCxnuXNQrs"></script>
    <style type="text/css">
    body,
    html,
    #allmap {
        width: 100%;
        height: 100%;
        overflow: hidden;
        margin: 0;
        font-family: "微软雅黑";
    }
    .changeCity {
        position: absolute;
        top: 0;
        left: 0;
        height: 48px;
        width: 100%;
        background: #ccc;
    }
    </style>
</head>

<body>
    <div id="allmap"></div>
    <div class="changeCity">
        <button onClick="changeCity('beijing')">北京市</button>
        <button onClick="changeCity('shenzhen')">深圳市</button>
    </div>
</body>

</html>
<script type="text/javascript">
const BAIDU_MAP_STYLE = [{
    "featureType": "highway",
    "elementType": "geometry.fill",
    "stylers": {
        "color": "#ffdfacff"
    }
}, {
    "featureType": "highway",
    "elementType": "geometry.stroke",
    "stylers": {
        "color": "#e2a135ff"
    }
}, {
    "featureType": "railway",
    "elementType": "geometry.fill",
    "stylers": {
        "color": "#babec4ff"
    }
}, {
    "featureType": "subway",
    "elementType": "geometry",
    "stylers": {
        "visibility": "on",
        "weight": 2.7
    }
}, {
    "featureType": "district",
    "elementType": "labels.text.fill",
    "stylers": {
        "color": "#5e5e5eff"
    }
}, {
    "featureType": "nationalway",
    "elementType": "labels.text.fill",
    "stylers": {
        "color": "#696969ff"
    }
}, {
    "featureType": "subwaylabel",
    "elementType": "labels.text.fill",
    "stylers": {
        "color": "#6d6d6dff"
    }
}, {
    "featureType": "subwaylabel",
    "elementType": "labels.text.stroke",
    "stylers": {
        "color": "#ffffffff",
        "weight": 2
    }
}, {
    "featureType": "provincialway",
    "elementType": "labels.text.fill",
    "stylers": {
        "color": "#858585ff"
    }
}, {
    "featureType": "cityhighway",
    "elementType": "labels.text.fill",
    "stylers": {
        "color": "#616161ff"
    }
}, {
    "featureType": "poilabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "on"
    }
}, {
    "featureType": "educationlabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "scenicspotslabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "scenicspotslabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off"
    }
}, {
    "featureType": "airportlabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "medicallabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "educationlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "11,14",
        "level": "11"
    }
}, {
    "featureType": "educationlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "11,14",
        "level": "12"
    }
}, {
    "featureType": "educationlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "11,14",
        "level": "13"
    }
}, {
    "featureType": "educationlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "11,14",
        "level": "14"
    }
}, {
    "featureType": "educationlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,14",
        "level": "11"
    }
}, {
    "featureType": "educationlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,14",
        "level": "12"
    }
}, {
    "featureType": "educationlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,14",
        "level": "13"
    }
}, {
    "featureType": "educationlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,14",
        "level": "14"
    }
}, {
    "featureType": "businesstowerlabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "restaurantlabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "restaurantlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "13"
    }
}, {
    "featureType": "restaurantlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "14"
    }
}, {
    "featureType": "restaurantlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "15"
    }
}, {
    "featureType": "restaurantlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "16"
    }
}, {
    "featureType": "restaurantlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "13"
    }
}, {
    "featureType": "restaurantlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "14"
    }
}, {
    "featureType": "restaurantlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "15"
    }
}, {
    "featureType": "restaurantlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "16"
    }
}, {
    "featureType": "restaurantlabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "13"
    }
}, {
    "featureType": "restaurantlabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "14"
    }
}, {
    "featureType": "restaurantlabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "15"
    }
}, {
    "featureType": "restaurantlabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,16",
        "level": "16"
    }
}, {
    "featureType": "shoppinglabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "hotellabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "medicallabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "13,13",
        "level": "13"
    }
}, {
    "featureType": "medicallabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,13",
        "level": "13"
    }
}, {
    "featureType": "entertainmentlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off"
    }
}, {
    "featureType": "entertainmentlabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off"
    }
}, {
    "featureType": "estatelabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "estatelabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "13,14",
        "level": "13"
    }
}, {
    "featureType": "estatelabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "13,14",
        "level": "14"
    }
}, {
    "featureType": "estatelabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,14",
        "level": "13"
    }
}, {
    "featureType": "estatelabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "13,14",
        "level": "14"
    }
}, {
    "featureType": "businesstowerlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "12,14",
        "level": "12"
    }
}, {
    "featureType": "businesstowerlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "12,14",
        "level": "13"
    }
}, {
    "featureType": "businesstowerlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "12,14",
        "level": "14"
    }
}, {
    "featureType": "businesstowerlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "12,14",
        "level": "12"
    }
}, {
    "featureType": "businesstowerlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "12,14",
        "level": "13"
    }
}, {
    "featureType": "businesstowerlabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "12,14",
        "level": "14"
    }
}, {
    "featureType": "businesstowerlabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "12,14",
        "level": "12"
    }
}, {
    "featureType": "businesstowerlabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "12,14",
        "level": "13"
    }
}, {
    "featureType": "businesstowerlabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "12,14",
        "level": "14"
    }
}, {
    "featureType": "companylabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off"
    }
}, {
    "featureType": "companylabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off"
    }
}, {
    "featureType": "governmentlabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off"
    }
}, {
    "featureType": "governmentlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "13,14",
        "level": "13"
    }
}, {
    "featureType": "governmentlabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "13,14",
        "level": "14"
    }
}, {
    "featureType": "governmentlabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "shoppinglabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "11,13",
        "level": "11"
    }
}, {
    "featureType": "shoppinglabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "11,13",
        "level": "12"
    }
}, {
    "featureType": "shoppinglabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "11,13",
        "level": "13"
    }
}, {
    "featureType": "shoppinglabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,13",
        "level": "11"
    }
}, {
    "featureType": "shoppinglabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,13",
        "level": "12"
    }
}, {
    "featureType": "shoppinglabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,13",
        "level": "13"
    }
}, {
    "featureType": "shoppinglabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,13",
        "level": "11"
    }
}, {
    "featureType": "shoppinglabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,13",
        "level": "12"
    }
}, {
    "featureType": "shoppinglabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "11,13",
        "level": "13"
    }
}, {
    "featureType": "carservicelabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off"
    }
}, {
    "featureType": "carservicelabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off"
    }
}, {
    "featureType": "transportationlabel",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "15"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "16"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "17"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "18"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "19"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "15"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "16"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "17"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "18"
    }
}, {
    "featureType": "financelabel",
    "elementType": "labels.icon",
    "stylers": {
        "visibility": "off",
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "19"
    }
}, {
    "featureType": "hotellabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "15"
    }
}, {
    "featureType": "hotellabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "16"
    }
}, {
    "featureType": "hotellabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "17"
    }
}, {
    "featureType": "hotellabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "18"
    }
}, {
    "featureType": "hotellabel",
    "stylers": {
        "curZoomRegionId": "0",
        "curZoomRegion": "15,19",
        "level": "19"
    }
}, {
    "featureType": "green",
    "elementType": "geometry",
    "stylers": {
        "color": "#c5ecb5ff"
    }
}, {
    "featureType": "land",
    "elementType": "geometry",
    "stylers": {
        "color": "#f5f5f5ff"
    }
}, {
    "featureType": "scenicspots",
    "elementType": "geometry",
    "stylers": {
        "color": "#c5ecb5ff"
    }
}, {
    "featureType": "local",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "fourlevelway",
    "elementType": "labels.text",
    "stylers": {
        "fontsize": 22
    }
}, {
    "featureType": "estate",
    "elementType": "geometry",
    "stylers": {
        "color": "#edededff"
    }
}];

// 百度地图API功能
var map = new BMap.Map("allmap");
map.centerAndZoom(new BMap.Point(116.407395, 39.904211), 11);
map.setMapStyleV2({
    styleJson: BAIDU_MAP_STYLE
});

function drawLngLat(lng, lat) {
    return new BMap.Point(lng, lat);
}

function changeCity(city) {
    //这么写有问题

    if (city === 'beijing') {
        map.setCenter(new BMap.Point(116.407395, 39.904211));
    } else {
        map.setCenter(new BMap.Point(114.083161, 22.647201));
    }
    //把这个写上边没问题
    if (map.getZoom() !== 12) {
        map.setZoom(12);
    }

    //这么写没问题
    // if (city === 'beijing') {
    //     map.centerAndZoom(new BMap.Point(116.407395, 39.904211), 12);
    // } else {
    //     map.centerAndZoom(new BMap.Point(114.083161, 22.647201), 12);
    // }
}
</script>