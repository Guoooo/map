<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>修改围栏路径</title>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=AB9553082c8a1107eac8bf4d30d8fd53"></script>
    <script src="https://public.ishowchina.com/js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/inmap/dist/inmap.min.js"></script>
    <style type="text/css">
    body,
    html,
    #allmap {
        width: 100%;
        height: 100%;
        overflow: hidden;
        margin: 0;
        font-family: "微软雅黑";
    }
    .main,
    .map-con {
        width: 100%;
        height: 100%
    }

    .chart-con {
        width: 1000px;
        height: 100%;
        margin: 0 auto;
    }

    .operate-con {
        position: absolute;
        right: 0px;
        top: 0px;
        width: 340px;
        height: 70%;
        background-color: #FFF;
        overflow-y: auto;
        text-align: center;
        z-index: 9999;
        padding: 0 20px;
    }

    #operate-wrap-con {
        margin-top: 10px;
        text-align: center;
    }
    .operate-btn-con {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 12px;
    }
    </style>
</head>

<body>
    <div id="allmap"></div>
    <div class="operate-con">
        <div class="operate-btn-con">
            <div>
                <input type="button" id="addBtn" value="画围栏" onclick="create()" />
                <input type="button" id="addBtn" value="获得围栏路径" onclick="getPath()" />
                <input type="button" id="addBtn" value="获得围栏字符串" onclick="getPathStr()" />
            </div>
        </div>
        <div id="operate-wrap-con">
            <textarea id="streetCon" rows="30" cols="45">106.50056,29.511373;106.500553,29.511381;106.500597,29.511379;106.500641,29.511378;106.500904,29.511371;106.501166,29.511363;106.501191,29.511362;106.501213,29.511361;106.501213,29.511361;106.501257,29.511361;106.501301,29.511361;106.501257,29.511362;106.501216,29.511363;106.501216,29.511363;106.5012,29.511364;106.501185,29.511366;106.501122,29.511367;106.501058,29.511369;106.501017,29.51137;106.500975,29.511371;106.500923,29.511373;106.50087,29.511374;106.500819,29.511376;106.500768,29.511377;106.500727,29.511378;106.500687,29.51138;106.50062,29.511382;106.500553,29.511384;106.50055,29.511384;106.500547,29.511383;106.500543,29.511382;106.500538,29.51138;106.500538,29.511382;106.500538,29.511385;106.500493,29.511385;106.500448,29.511386;106.500439,29.511387;106.50043,29.511387;106.500431,29.5114;106.500433,29.511413;106.500434,29.511461;106.500435,29.511509;106.500437,29.511541;106.500438,29.511574;106.50044,29.511584;106.500442,29.511594;106.500456,29.511593;106.500471,29.511592;106.500471,29.511594;106.500471,29.511596;106.500457,29.511596;106.500442,29.511597;106.50044,29.511597;106.500438,29.511596;106.500439,29.51161;106.500441,29.511623;106.500442,29.511673;106.500444,29.511724;106.500445,29.511754;106.500446,29.511785;106.500448,29.51183;106.500449,29.511876;106.500451,29.51191;106.500452,29.511944;106.500453,29.511986;106.500455,29.512028;106.500456,29.512061;106.500457,29.512093;106.500459,29.512149;106.500462,29.512206;106.500461,29.512223;106.50046,29.51224;106.500463,29.51224;106.500462,29.51225;106.500461,29.512262;106.500459,29.51228;106.500458,29.512299;106.500522,29.5123;106.500586,29.5123;106.500629,29.512301;106.500672,29.512301;106.500933,29.512301;106.501194,29.512302;106.501195,29.512303;106.501196,29.512304;106.501206,29.512304;106.501217,29.512304;106.501217,29.512302;106.501312,29.512303;106.501409,29.512303;106.50141,29.512304;106.501411,29.512305;106.50143,29.512305;106.501448,29.512305;106.501448,29.512269;106.501448,29.512232;106.501447,29.512232;106.501448,29.512192;106.501448,29.51215;106.501449,29.512149;106.501451,29.512147;106.501451,29.512191;106.501451,29.512232;106.501451,29.512235;106.501451,29.51227;106.501451,29.512307;106.501332,29.512306;106.501214,29.512305;106.501214,29.512306;106.501186,29.512305;106.501156,29.512304;106.5009,29.512304;106.500645,29.512304;106.50055,29.512303;106.500455,29.512302;106.500457,29.512269;106.500458,29.512237;106.500458,29.512237;106.500458,29.512219;106.500458,29.512198;106.500447,29.511888;106.500436,29.511576;106.500434,29.511541;106.500432,29.511505;106.500427,29.511505;106.500422,29.511505;106.500417,29.511511;106.500412,29.511518;106.500413,29.51152;106.500414,29.511523;106.500406,29.511532;106.500398,29.51154;106.500393,29.51154;106.500387,29.51154;106.500382,29.511547;106.500376,29.511555;106.500377,29.511556;106.500379,29.511558;106.500371,29.511567;106.500363,29.511576;106.500358,29.511576;106.500352,29.511576;106.500347,29.511583;106.500341,29.51159;106.500342,29.511592;106.500344,29.511594;106.500334,29.511603;106.500325,29.511613;106.500322,29.511612;106.500318,29.511611;106.500312,29.511618;106.500306,29.511625;106.500308,29.511627;106.500309,29.511629;106.500299,29.511639;106.50029,29.511648;106.500287,29.511647;106.500283,29.511646;106.500277,29.511653;106.500271,29.51166;106.500271,29.511663;106.500272,29.511667;106.500265,29.511674;106.500258,29.511681;106.500249,29.511683;106.500241,29.511684;106.500239,29.511682;106.500238,29.511679;106.500226,29.511681;106.500215,29.511682;106.500216,29.511685;106.500217,29.511688;106.500204,29.51169;106.500191,29.511691;106.500187,29.51169;106.500184,29.511688;106.500176,29.511689;106.500168,29.511689;106.500165,29.511693;106.500162,29.511696;106.500149,29.511698;106.500136,29.5117;106.500134,29.511699;106.500133,29.511696;106.500122,29.511697;106.500112,29.511698;106.50011,29.511701;106.500108,29.511703;106.500095,29.511706;106.500082,29.511708;106.50008,29.511707;106.500079,29.511706;106.500083,29.511703;106.500087,29.511701;106.500082,29.511702;106.500076,29.511704;106.500063,29.511705;106.500051,29.511707;106.500054,29.511709;106.500058,29.511711;106.500054,29.511713;106.50005,29.511715;106.500052,29.511724;106.500053,29.511733;106.500056,29.511746;106.500059,29.511759;106.500069,29.51181;106.500081,29.511861;106.500084,29.511875;106.500086,29.511889;106.500089,29.5119;106.500091,29.51191;106.5001,29.51195;106.500108,29.51199;106.500111,29.512002;106.500113,29.512014;106.500116,29.512027;106.500118,29.51204;106.500121,29.512052;106.500123,29.512065;106.500134,29.512116;106.500145,29.512168;106.500148,29.51218;106.500151,29.512193;106.500155,29.512212;106.500159,29.512231;106.50016,29.512236;106.500162,29.512241;106.500162,29.512241;106.500163,29.512243;106.500164,29.512247;106.500169,29.512273;106.500175,29.512298;106.500179,29.512318;106.500183,29.512338;106.500191,29.512375;106.500199,29.512413;106.500203,29.512433;106.500207,29.512453;106.500215,29.512491;106.500224,29.51253;106.500227,29.512544;106.50023,29.512558;106.500232,29.512568;106.500234,29.512579;106.500241,29.512611;106.500248,29.512644;106.500251,29.512658;106.500254,29.512672;106.500256,29.512683;106.500259,29.512693;106.500266,29.512726;106.500272,29.512759;106.500278,29.512784;106.500283,29.51281;106.500286,29.512822;106.500289,29.512835;106.5003,29.512833;106.500311,29.512832;106.500352,29.512828;106.500392,29.512825;106.500406,29.512823;106.500419,29.512822;106.500428,29.512821;106.500438,29.51282;106.500455,29.512819;106.500473,29.512817;106.50048,29.512816;106.500486,29.512815;106.500505,29.512814;106.500524,29.512812;106.500531,29.512811;106.500537,29.51281;106.500556,29.512809;106.500575,29.512807;106.500582,29.512806;106.500589,29.512805;106.500607,29.512804;106.500626,29.512802;106.500633,29.512801;106.50064,29.5128;106.500659,29.512799;106.500677,29.512797;106.500684,29.512796;106.500691,29.512795;106.50071,29.512794;106.500729,29.512792;106.500735,29.512791;106.500742,29.51279;106.500761,29.512789;106.50078,29.512787;106.500788,29.512786;106.500796,29.512785;106.500812,29.512784;106.500828,29.512782;106.500839,29.512782;106.50085,29.51278;106.500862,29.512779;106.500874,29.512778;106.501041,29.512762;106.501209,29.512746;106.501213,29.512746;106.501217,29.512746;106.501217,29.512744;106.501235,29.512742;106.501256,29.512741;106.501264,29.51274;106.501272,29.512739;106.501311,29.512735;106.50135,29.512731;106.501364,29.51273;106.501377,29.512728;106.501386,29.512727;106.501396,29.512726;106.501435,29.512723;106.501474,29.512719;106.501485,29.512718;106.501495,29.512717;106.501547,29.512712;106.501598,29.512707;106.501608,29.512705;106.501619,29.512704;106.501658,29.512701;106.501697,29.512697;106.501708,29.512696;106.501719,29.512694;106.50174,29.512693;106.501761,29.512691;106.501767,29.512694;106.501773,29.512696;106.501821,29.512715;106.50187,29.512733;106.501882,29.512732;106.501894,29.512732;106.501968,29.51273;106.502042,29.512728;106.502069,29.512727;106.502095,29.512726;106.502153,29.512724;106.502211,29.512723;106.50226,29.512722;106.502308,29.51272;106.502343,29.512719;106.502378,29.512718;106.502449,29.512716;106.50252,29.512714;106.502534,29.512714;106.502547,29.512713;106.50257,29.512712;106.502589,29.512712;106.502611,29.512712;106.502633,29.512712;106.502637,29.512713;106.502642,29.512714;106.502664,29.512715;106.502687,29.512717;106.50275,29.512724;106.502814,29.51273;106.502877,29.512737;106.50294,29.512744;106.502971,29.512748;106.503002,29.512753;106.503088,29.512767;106.503174,29.512781;106.503194,29.512784;106.503215,29.512787;106.503237,29.512791;106.503259,29.512794;106.50328,29.512798;106.503302,29.512801;106.503324,29.512805;106.503346,29.512808;106.503366,29.512811;106.503387,29.512815;106.503414,29.512819;106.503441,29.512822;106.503501,29.512813;106.503561,29.512803;106.503568,29.512803;106.503575,29.512803;106.503767,29.512838;106.50396,29.512874;106.503963,29.512874;106.503966,29.512874;106.503966,29.512549;106.503966,29.512226;106.503966,29.512224;106.503965,29.51164;106.503965,29.511055;106.503948,29.511053;106.503931,29.511052;106.503837,29.511046;106.503743,29.511041;106.503704,29.511038;106.503665,29.511036;106.503618,29.511033;106.503579,29.51103;106.503579,29.51103;106.503577,29.51103;106.503572,29.511029;106.503571,29.511029;106.503549,29.511028;106.50352,29.511027;106.503513,29.511026;106.503506,29.511025;106.503482,29.511024;106.503458,29.511022;106.503448,29.511022;106.503439,29.511021;106.503411,29.511019;106.503383,29.511018;106.503376,29.511017;106.503369,29.511016;106.503345,29.511015;106.503321,29.511013;106.503311,29.511013;106.503302,29.511012;106.503274,29.51101;106.503245,29.511009;106.503239,29.511008;106.503232,29.511007;106.503208,29.511006;106.503184,29.511004;106.503174,29.511004;106.503165,29.511003;106.503138,29.511002;106.503111,29.511;106.503058,29.510999;106.503006,29.510998;106.502931,29.510997;106.502855,29.510996;106.502804,29.510995;106.502753,29.510994;106.502671,29.510993;106.502588,29.510992;106.502588,29.510993;106.502579,29.510992;106.502568,29.510992;106.502557,29.510992;106.502546,29.510991;106.502459,29.51099;106.502371,29.510989;106.502344,29.510988;106.502317,29.510987;106.502245,29.510986;106.502172,29.510985;106.50214,29.510984;106.502108,29.510983;106.502039,29.510982;106.50197,29.510981;106.501929,29.51098;106.501887,29.510979;106.501825,29.510978;106.501763,29.510977;106.501719,29.510976;106.501674,29.510975;106.501621,29.510974;106.501567,29.510973;106.501547,29.510972;106.501526,29.510971;106.501486,29.51097;106.501446,29.510969;106.501416,29.510968;106.501386,29.510967;106.50136,29.510966;106.501333,29.510965;106.501292,29.510964;106.501252,29.510963;106.501232,29.510962;106.501213,29.510961;106.501213,29.510961;106.501197,29.510961;106.501179,29.510961;106.501006,29.510955;106.500832,29.510949;106.500801,29.510948;106.50077,29.510947;106.500742,29.510946;106.500714,29.510945;106.500537,29.510938;106.500361,29.510933;106.500329,29.510931;106.500297,29.51093;106.500271,29.510929;106.500245,29.510928;106.500064,29.510922;106.499883,29.510916;106.499882,29.510917;106.499881,29.510918;106.499886,29.510942;106.499891,29.510966;106.499898,29.511002;106.499905,29.511037;106.499906,29.511042;106.499907,29.511045;106.499907,29.511045;106.499909,29.511051;106.499911,29.511058;106.499913,29.51107;106.499916,29.511082;106.499918,29.511094;106.499921,29.511107;106.499935,29.511171;106.499948,29.511235;106.499953,29.511255;106.499957,29.511275;106.499959,29.511287;106.499962,29.511299;106.499964,29.511312;106.499967,29.511325;106.49997,29.511338;106.499972,29.51135;106.499986,29.511413;106.499999,29.511476;106.500004,29.511497;106.500008,29.511518;106.500011,29.51153;106.500013,29.511542;106.500015,29.511555;106.500018,29.511567;106.500028,29.511613;106.500037,29.511658;106.50004,29.511671;106.500043,29.511683;106.500047,29.511683;106.500051,29.511683;106.500051,29.511685;106.500051,29.511688;106.500059,29.511686;106.500067,29.511685;106.500076,29.511685;106.500084,29.511685;106.500079,29.511683;106.500074,29.511681;106.500077,29.51168;106.500079,29.511678;106.500091,29.511677;106.500102,29.511675;106.500104,29.511677;106.500106,29.51168;106.500116,29.511678;106.500127,29.511675;106.500129,29.511673;106.500131,29.51167;106.500144,29.511668;106.500157,29.511666;106.500158,29.511668;106.50016,29.511671;106.500171,29.511669;106.500183,29.511667;106.500183,29.511664;106.500183,29.511661;106.500197,29.51166;106.500211,29.511658;106.500212,29.51166;106.500213,29.511663;106.500221,29.511661;106.50023,29.51166;106.500239,29.511651;106.500248,29.511643;106.500249,29.511646;106.50025,29.511649;106.500258,29.511641;106.500266,29.511633;106.500265,29.51163;106.500264,29.511626;106.500273,29.511617;106.500283,29.511608;106.500284,29.51161;106.500285,29.511613;106.500293,29.511605;106.500302,29.511597;106.5003,29.511595;106.500298,29.511592;106.500307,29.511583;106.500316,29.511575;106.500319,29.511575;106.500322,29.511575;106.50033,29.511568;106.500339,29.511561;106.500335,29.511559;106.500332,29.511558;106.500341,29.511548;106.500351,29.511539;106.500354,29.511539;106.500357,29.511539;106.500365,29.511532;106.500374,29.511526;106.50037,29.511524;106.500367,29.511522;106.500376,29.511513;106.500385,29.511504;106.500389,29.511504;106.500392,29.511504;106.5004,29.511497;106.500408,29.511491;106.500407,29.511487;106.500405,29.511484;106.500414,29.511476;106.500423,29.511468;106.500427,29.511469;106.500431,29.51147;106.50043,29.511427;106.500428,29.511384;106.50047,29.511383;106.500511,29.511382;106.500522,29.511371;106.500533,29.511361;106.500534,29.511363;106.500535,29.511366;106.500543,29.511358;106.500552,29.51135;106.50055,29.511348;106.500548,29.511346;106.500557,29.511337;106.500565,29.511329;106.50057,29.511329;106.500575,29.511329;106.50058,29.511323;106.500586,29.511318;106.500586,29.511314;106.500585,29.511311;106.500594,29.511302;106.500603,29.511293;106.500606,29.511294;106.500609,29.511296;106.500612,29.511291;106.500616,29.511287;106.50062,29.511287;106.500624,29.511287;106.50063,29.511281;106.500636,29.511275;106.500646,29.511273;106.500656,29.51127;106.50066,29.511271;106.500664,29.511272;106.500673,29.511269;106.500683,29.511267;106.500683,29.511264;106.500683,29.511261;106.500694,29.511257;106.500705,29.511253;106.50071,29.511255;106.500715,29.511256;106.500725,29.511253;106.500734,29.51125;106.500734,29.511247;106.500734,29.511244;106.500747,29.511241;106.500759,29.511237;106.50076,29.511237;106.500762,29.511237;106.50076,29.51124;106.500759,29.511243;106.500768,29.51124;106.500777,29.511237;106.500783,29.511237;106.500788,29.511237;106.500788,29.511233;106.500788,29.51123;106.500802,29.511229;106.500816,29.511227;106.500817,29.511229;106.500819,29.511231;106.500829,29.51123;106.500839,29.511229;106.500839,29.511226;106.500839,29.511223;106.500849,29.511222;106.500859,29.51122;106.500873,29.511221;106.500886,29.511223;106.500891,29.511218;106.500896,29.511214;106.500911,29.511213;106.500925,29.511212;106.500925,29.511215;106.500925,29.511217;106.500937,29.511217;106.500949,29.511217;106.500949,29.511215;106.500949,29.511212;106.500964,29.511212;106.500979,29.511212;106.500979,29.511216;106.500979,29.511219;106.500991,29.511219;106.501003,29.511219;106.501003,29.511217;106.501003,29.511214;106.501018,29.511214;106.501033,29.511214;106.501033,29.511218;106.501033,29.511221;106.501045,29.511221;106.501057,29.511221;106.501057,29.511219;106.501057,29.511217;106.501072,29.511216;106.501086,29.511216;106.501088,29.51122;106.501089,29.511223;106.5011,29.511223;106.501111,29.511223;106.501111,29.511221;106.501111,29.511219;106.501126,29.511219;106.50114,29.511219;106.50114,29.511221;106.50114,29.511223;106.501137,29.511224;106.501135,29.511225;106.50115,29.511225;106.501165,29.511225;106.501165,29.511223;106.501165,29.511221;106.501179,29.511221;106.501194,29.511221;106.501195,29.511223;106.501196,29.511225;106.501206,29.511226;106.501216,29.511228;106.501216,29.511223;106.501228,29.511223;106.501242,29.511223;106.501244,29.511226;106.501245,29.51123;106.501256,29.51123;106.501267,29.51123;106.501267,29.511227;106.501267,29.511225;106.501282,29.511225;106.501297,29.511225;106.501297,29.511228;106.501297,29.511232;106.501309,29.511232;106.501321,29.511232;106.501321,29.511229;106.501321,29.511227;106.501333,29.511227;106.501345,29.511227;106.501348,29.51123;106.501352,29.511233;106.501366,29.511234;106.50138,29.511235;106.501377,29.511234;106.501373,29.511232;106.501375,29.51123;106.501377,29.511229;106.50139,29.51123;106.501404,29.511232;106.501404,29.511234;106.501404,29.511236;106.501416,29.511236;106.501428,29.511236;106.501428,29.511234;106.501428,29.511231;106.501434,29.511231;106.501439,29.511231;106.501439,29.511235;106.501439,29.511238;106.501443,29.51124;106.501447,29.511241;106.501447,29.511248;106.501447,29.511254;106.501442,29.511256;106.501436,29.511257;106.501436,29.511259;106.501436,29.511262;106.501431,29.511262;106.501426,29.511262;106.501426,29.51126;106.501426,29.511257;106.501413,29.511257;106.5014,29.511256;106.501401,29.511259;106.501402,29.511262;106.501388,29.511261;106.501373,29.511259;106.501372,29.511257;106.501371,29.511255;106.501359,29.511255;106.501348,29.511255;106.501348,29.511257;106.501348,29.511259;106.501334,29.511258;106.501319,29.511257;106.501318,29.511255;106.501317,29.511253;106.501305,29.511252;106.501294,29.511251;106.501294,29.511253;106.501294,29.511255;106.501279,29.511255;106.501265,29.511255;106.501264,29.511253;106.501263,29.51125;106.501251,29.511249;106.50124,29.511248;106.50124,29.511251;106.50124,29.511253;106.501227,29.511253;106.501216,29.511253;106.501216,29.511246;106.501205,29.511246;106.501194,29.511246;106.501194,29.511249;106.501194,29.511251;106.501181,29.511251;106.501167,29.511251;106.501163,29.511248;106.501159,29.511244;106.50115,29.511244;106.50114,29.511244;106.50114,29.511247;106.50114,29.511249;106.501125,29.511249;106.50111,29.511249;106.501112,29.511246;106.501113,29.511243;106.5011,29.511243;106.501087,29.511242;106.501087,29.511244;106.501087,29.511247;106.501072,29.511247;106.501058,29.511247;106.501056,29.511245;106.501056,29.511243;106.501044,29.511241;106.501033,29.51124;106.501033,29.511242;106.501033,29.511245;106.501018,29.511245;106.501004,29.511245;106.501003,29.511243;106.501002,29.511241;106.50099,29.51124;106.500979,29.511238;106.500979,29.511241;106.500979,29.511243;106.500964,29.511243;106.500949,29.511243;106.50095,29.51124;106.500951,29.511237;106.500939,29.511238;106.500927,29.511239;106.500925,29.511241;106.500924,29.511242;106.500911,29.511244;106.500898,29.511245;106.500899,29.511242;106.5009,29.511239;106.500887,29.511242;106.500874,29.511244;106.500874,29.511247;106.500874,29.511249;106.50086,29.511251;106.500846,29.511253;106.500844,29.51125;106.500842,29.511247;106.50084,29.511249;106.500837,29.51125;106.500827,29.511251;106.500818,29.511251;106.50082,29.511254;106.500823,29.511257;106.500812,29.511258;106.500801,29.51126;106.500788,29.511259;106.500774,29.511257;106.500773,29.511262;106.500772,29.511266;106.500758,29.51127;106.500744,29.511274;106.500742,29.511272;106.50074,29.511269;106.500733,29.511272;106.500725,29.511275;106.500721,29.511279;106.500717,29.511283;106.500706,29.511287;106.500695,29.511291;106.500692,29.511289;106.500689,29.511286;106.50068,29.511289;106.50067,29.511292;106.500669,29.511295;106.500668,29.511299;106.500657,29.511302;106.500647,29.511305;106.50064,29.511304;106.500635,29.511302;106.500631,29.511305;106.500627,29.511308;106.500628,29.511311;106.500629,29.511314;106.50062,29.511323;106.50061,29.511332;106.500609,29.511329;106.500607,29.511327;106.500598,29.511335;106.500589,29.511344;106.500592,29.511346;106.500596,29.511347;106.500585,29.511357;106.500574,29.511366;106.500571,29.511366;106.500568,29.511365;106.50056,29.511373</textarea>
        </div>
    </div>
</body>

</html>
<script type="text/javascript">
var inmap = new inMap.Map({
    id: "allmap",
    // skin: "WhiteLover",
    center: [116.407395, 39.904211],
    zoom: {
        value: 12,
        show: true,
        max: 18,
        min: 5
    }
});

function drawLngLat(lng, lat) {
    return new BMap.Point(lng, lat);
}
var $static = 'http://www.wulihub.com.cn/go/JPVkkW/';

function drawMarker(point, type) {
    let opts = {};

    let icon = new BMap.Icon($static + "/marker.png", new BMap.Size(27, 27))
    icon.setImageSize(new BMap.Size(27, 27));
    opts.icon = icon;
    return new BMap.Marker(point, opts);
}
const drawOption_office = {
    fillColor: '#cccccc',
    fillOpacity: 0,
    strokeStyle: 'dashed',
    strokeColor: "#261AE4",
    strokeWeight: 2,
    enableClicking: true
}

function drawOfficePolygon(path) {
    let opts = {};
    opts.fillColor = drawOption_office.fillColor;
    opts.fillOpacity = drawOption_office.fillOpacity;
    opts.strokeStyle = drawOption_office.strokeStyle;
    opts.strokeColor = drawOption_office.strokeColor;
    opts.strokeWeight = drawOption_office.strokeWeight;
    opts.enableClicking = drawOption_office.enableClicking;

    return new BMap.Polygon(path, opts);
}

let overlay;

function create() {
    var val = $("#streetCon").val();
    if (!val) {
        return;
    }
    let polygonArray = val.split('|');
    //用逗号分割，取出经纬度坐标
    let path = [];
    let center;
    let ary;
    for (let item of polygonArray) {
        let array = item.split(';');
        for (let x of array) {
            let lnglat = x.split(',');
            path.push([Number(lnglat[0]), Number(lnglat[1])])
        }
    }
    center = drawLngLat(path[0][0], path[0][1]);

    let data = getArray(path);

    overlay = new inMap.PolygonEditorOverlay({
        style: {
            isEdit: true,
            point: {
                normal: {
                    backgroundColor: "rgba(93,158,247,0.7)", // 填充颜色
                    size: 6, // 半径
                },
                mouseOver: {
                    backgroundColor: "rgba(93,158,247,1)",
                    borderColor: "rgba(93,158,247,1)",
                    borderWidth: 1
                },
                selected: {
                    borderWidth: 1,
                    backgroundColor: "rgba(184,0,0,1)",
                }

            },
            virtualPoint: {
                normal: {
                    backgroundColor: 'rgba(0, 0, 0, 0)',
                    borderWidth: 1,
                    borderColor: "rgba(0,131,238, 1)",
                    size: 6,
                },
                mouseOver: {
                    backgroundColor: 'rgba(0, 0, 0, 0)',
                    borderWidth: 2
                },

            },
            polygon: {
                normal: {
                    borderWidth: 1.5,
                    backgroundColor: "rgba(0,184,255,0.3)"
                }
            }
        },
        data: data,
        event: {
            onCreated(event) {
                console.log('onCreate', event);
            },
            onChange(type, event) {
                console.log('onChange', type, event);
            },
            onDelete(event) {
                console.log('onDelete', event);
            }
        }
    });
    inmap.add(overlay);
    inmap.getMap().centerAndZoom(center, 17);
}

function getArray(ary) {
    var data = {
        "geometry": {
            "type": "Polygon",
            "coordinates": [
                ary
            ]
        }
    }
    return data;
}

function getPath() {
    let path = overlay.getPath();
    console.log(path)
    return path;
}

function getPathStr() {
    let path = getPath();
    let str = ''
    console.log('长度：', path.geometry.coordinates[0][0].length);
    path.geometry.coordinates[0][0].map((item, index) => {

        if (index !== path.geometry.coordinates[0][0].length - 1) {
            str += item[0] + ',' + item[1] + ';'
        } else {
            str += item[0] + ',' + item[1]
        }
    })
    console.log(str)
}
</script>